{
  "entities": {
    "XLSXFile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "XLSXFile",
      "type": "object",
      "description": "Represents an uploaded XLSX file and its associated data.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the XLSX file entity."
        },
        "fileName": {
          "type": "string",
          "description": "The name of the uploaded XLSX file."
        },
        "uploadDate": {
          "type": "string",
          "description": "The date and time when the file was uploaded.",
          "format": "date-time"
        },
        "column1Data": {
          "type": "array",
          "description": "Array containing data extracted from the first column of the XLSX file.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "fileName",
        "uploadDate",
        "column1Data"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}/xlsx_files/{fileId}",
        "definition": {
          "entityName": "XLSXFile",
          "schema": {
            "$ref": "#/backend/entities/XLSXFile"
          },
          "description": "Stores XLSX files uploaded by a specific user. Enables path-based ownership for secure access control.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user who owns the XLSX file."
            },
            {
              "name": "fileId",
              "description": "The unique identifier of the XLSX file."
            }
          ]
        }
      }
    ],
    "reasoning": "Given the requirement for users to upload XLSX files and display data from the first column in a list view, and the error 'Missing or insufficient permissions', the data structure should prioritize security by scoping file uploads to individual users. This ensures that users can only access their own uploaded files. To achieve Authorization Independence and enable secure list operations (QAPs), each file will be stored under a user-specific collection. This eliminates the need for complex rules that rely on parent document checks (`get()` calls)."
  }
}